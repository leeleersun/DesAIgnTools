{"ast":null,"code":"var _jsxFileName = \"/Users/augstarli/\\u4E8B\\u52A1/DesAIgn/AI\\u5DE5\\u5177\\u56FE\\u8C31/my-app/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useLayoutEffect } from \"react\";\nimport { Layout, message } from \"antd\";\nimport RouterBefore from \"./router/RouteBefore\";\nimport NavHeader from \"./components/NavHeader\";\nimport PageFooter from \"./components/PageFooter\";\nimport Login from \"./components/LoginForm\";\nimport { useDispatch } from \"react-redux\";\nimport { changeLoginStatus, initUserInfo } from \"./redux/userSlice\";\nimport { getInfo, getUserById } from \"./api/user\";\nimport { getTypeList } from \"./redux/typeSlice\";\nimport \"./css/App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Header,\n  Footer,\n  Content\n} = Layout;\nfunction App() {\n  _s();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const dispatch = useDispatch();\n  useLayoutEffect(() => {\n    // 第一次进入应用，确认用户的登录状态\n    async function whoami() {\n      const result = await getInfo();\n      if (result.data) {\n        // token 验证成功\n\n        // 根据 id 获取\n        const {\n          data\n        } = await getUserById(result.data._id);\n        dispatch(initUserInfo(data));\n        dispatch(changeLoginStatus(true));\n      } else {\n        message.warning(result.msg);\n        localStorage.removeItem(\"userToken\");\n      }\n    }\n    if (localStorage.getItem(\"userToken\")) {\n      whoami();\n    }\n\n    // 填充仓库的类型列表\n    dispatch(getTypeList());\n  }, []);\n\n  /**\n   * 打开登录模态框\n   */\n  function loginHandle() {\n    setIsModalOpen(true);\n  }\n\n  /**\n   * 关闭登录模态框\n   */\n  function closeModal() {\n    setIsModalOpen(false);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Layout, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        className: \"header\",\n        children: /*#__PURE__*/_jsxDEV(NavHeader, {\n          loginHandle: loginHandle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Content, {\n        className: \"content\",\n        children: /*#__PURE__*/_jsxDEV(RouterBefore, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {\n        className: \"footer\",\n        children: /*#__PURE__*/_jsxDEV(PageFooter, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Login, {\n      isShow: isModalOpen,\n      closeModal: closeModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"ECDINzFoedFAUlttCyzVvZRTlD4=\", false, function () {\n  return [useDispatch];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useLayoutEffect","Layout","message","RouterBefore","NavHeader","PageFooter","Login","useDispatch","changeLoginStatus","initUserInfo","getInfo","getUserById","getTypeList","jsxDEV","_jsxDEV","Header","Footer","Content","App","_s","isModalOpen","setIsModalOpen","dispatch","whoami","result","data","_id","warning","msg","localStorage","removeItem","getItem","loginHandle","closeModal","className","children","fileName","_jsxFileName","lineNumber","columnNumber","isShow","_c","$RefreshReg$"],"sources":["/Users/augstarli/事务/DesAIgn/AI工具图谱/my-app/src/App.js"],"sourcesContent":["import React, { useState, useLayoutEffect } from \"react\";\nimport { Layout, message } from \"antd\";\nimport RouterBefore from \"./router/RouteBefore\";\n\nimport NavHeader from \"./components/NavHeader\";\nimport PageFooter from \"./components/PageFooter\";\nimport Login from \"./components/LoginForm\";\n\nimport { useDispatch } from \"react-redux\";\nimport { changeLoginStatus, initUserInfo } from \"./redux/userSlice\";\nimport { getInfo, getUserById } from \"./api/user\";\nimport { getTypeList } from \"./redux/typeSlice\";\n\nimport \"./css/App.css\";\n\nconst { Header, Footer, Content } = Layout;\n\nfunction App() {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const dispatch = useDispatch();\n\n  useLayoutEffect(() => {\n    // 第一次进入应用，确认用户的登录状态\n    async function whoami() {\n      const result = await getInfo();\n      if (result.data) {\n        // token 验证成功\n\n        // 根据 id 获取\n        const { data } = await getUserById(result.data._id);\n        dispatch(initUserInfo(data));\n        dispatch(changeLoginStatus(true));\n      } else {\n        message.warning(result.msg);\n        localStorage.removeItem(\"userToken\");\n      }\n    }\n    if (localStorage.getItem(\"userToken\")) {\n      whoami();\n    }\n\n    // 填充仓库的类型列表\n    dispatch(getTypeList());\n  }, []);\n\n  /**\n   * 打开登录模态框\n   */\n  function loginHandle() {\n    setIsModalOpen(true);\n  }\n\n  /**\n   * 关闭登录模态框\n   */\n  function closeModal() {\n    setIsModalOpen(false);\n  }\n\n  return (\n    <div className=\"App\">\n      <Layout>\n        {/* 头部 */}\n        <Header className=\"header\">\n          <NavHeader loginHandle={loginHandle} />\n        </Header>\n        {/* 内容区域 */}\n        <Content className=\"content\">\n          <RouterBefore />\n        </Content>\n        <Footer className=\"footer\">\n          <PageFooter />\n        </Footer>\n      </Layout>\n      {/* 登录弹窗 */}\n      <Login isShow={isModalOpen} closeModal={closeModal} />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,eAAe,QAAQ,OAAO;AACxD,SAASC,MAAM,EAAEC,OAAO,QAAQ,MAAM;AACtC,OAAOC,YAAY,MAAM,sBAAsB;AAE/C,OAAOC,SAAS,MAAM,wBAAwB;AAC9C,OAAOC,UAAU,MAAM,yBAAyB;AAChD,OAAOC,KAAK,MAAM,wBAAwB;AAE1C,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,iBAAiB,EAAEC,YAAY,QAAQ,mBAAmB;AACnE,SAASC,OAAO,EAAEC,WAAW,QAAQ,YAAY;AACjD,SAASC,WAAW,QAAQ,mBAAmB;AAE/C,OAAO,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvB,MAAM;EAAEC,MAAM;EAAEC,MAAM;EAAEC;AAAQ,CAAC,GAAGhB,MAAM;AAE1C,SAASiB,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAMuB,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAE9BP,eAAe,CAAC,MAAM;IACpB;IACA,eAAeuB,MAAMA,CAAA,EAAG;MACtB,MAAMC,MAAM,GAAG,MAAMd,OAAO,CAAC,CAAC;MAC9B,IAAIc,MAAM,CAACC,IAAI,EAAE;QACf;;QAEA;QACA,MAAM;UAAEA;QAAK,CAAC,GAAG,MAAMd,WAAW,CAACa,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC;QACnDJ,QAAQ,CAACb,YAAY,CAACgB,IAAI,CAAC,CAAC;QAC5BH,QAAQ,CAACd,iBAAiB,CAAC,IAAI,CAAC,CAAC;MACnC,CAAC,MAAM;QACLN,OAAO,CAACyB,OAAO,CAACH,MAAM,CAACI,GAAG,CAAC;QAC3BC,YAAY,CAACC,UAAU,CAAC,WAAW,CAAC;MACtC;IACF;IACA,IAAID,YAAY,CAACE,OAAO,CAAC,WAAW,CAAC,EAAE;MACrCR,MAAM,CAAC,CAAC;IACV;;IAEA;IACAD,QAAQ,CAACV,WAAW,CAAC,CAAC,CAAC;EACzB,CAAC,EAAE,EAAE,CAAC;;EAEN;AACF;AACA;EACE,SAASoB,WAAWA,CAAA,EAAG;IACrBX,cAAc,CAAC,IAAI,CAAC;EACtB;;EAEA;AACF;AACA;EACE,SAASY,UAAUA,CAAA,EAAG;IACpBZ,cAAc,CAAC,KAAK,CAAC;EACvB;EAEA,oBACEP,OAAA;IAAKoB,SAAS,EAAC,KAAK;IAAAC,QAAA,gBAClBrB,OAAA,CAACb,MAAM;MAAAkC,QAAA,gBAELrB,OAAA,CAACC,MAAM;QAACmB,SAAS,EAAC,QAAQ;QAAAC,QAAA,eACxBrB,OAAA,CAACV,SAAS;UAAC4B,WAAW,EAAEA;QAAY;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjC,CAAC,eAETzB,OAAA,CAACG,OAAO;QAACiB,SAAS,EAAC,SAAS;QAAAC,QAAA,eAC1BrB,OAAA,CAACX,YAAY;UAAAiC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACT,CAAC,eACVzB,OAAA,CAACE,MAAM;QAACkB,SAAS,EAAC,QAAQ;QAAAC,QAAA,eACxBrB,OAAA,CAACT,UAAU;UAAA+B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAETzB,OAAA,CAACR,KAAK;MAACkC,MAAM,EAAEpB,WAAY;MAACa,UAAU,EAAEA;IAAW;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACnD,CAAC;AAEV;AAACpB,EAAA,CA7DQD,GAAG;EAAA,QAEOX,WAAW;AAAA;AAAAkC,EAAA,GAFrBvB,GAAG;AA+DZ,eAAeA,GAAG;AAAC,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}